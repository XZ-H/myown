!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../static/js/jquery.js"></script>
    <script src="../static/js/flexible.js"></script>
    <script src="../static/js/echarts.min.js"></script>
    <script src="../static/js/axios.min.js"></script>
    <title>Title</title>
    <link rel="stylesheet" href="../static/css/single.css">
</head>
<body>
<section class="mainBox" >
    <div class="column">
        <div class="panel pie_1">
                <h2>饼状图</h2>
                <div class="chart"></div>
                <div class="panel_footer"></div>
        </div>
    </div>

</section>
<div class="exp">
    <p>欧洲GDP对比结果如上图所示，德国、英国、法国占欧洲比重比较高，其余欧洲国家GDP比重差不多。</p>
</div>
<script type="text/javascript">
     var myChart = echarts.init(document.querySelector(".pie_1 .chart"));

    option = {
        tooltip: {
            trigger: "item",
            formatter: "{a}<br>{b} : {c} ({d}%)", //a 系列名称，b 数据项名称，c 数值，d 百分比
            position: function (p) {
                //其中p为当前鼠标的位置
                return [p[0] + 10, p[1] - 10];
            },
        },
        legend: {
            orient: "vertical",
            x: "left",
            itemWidth: 10,
            itemHeight: 10,
            data: [
                "德国",
                "英国",
                "法国",
                "意大利",
                "俄罗斯",
                "西班牙",
                "荷兰",
                "瑞士",
                "瑞典",
                "波兰",
            ],
            textStyle: {
                color: "rgba(255,255,255,.5)",
                fontSize: "12",
            },
        },

        series: [
            {
                type: "pie",
                center: ["50%", "42%"],
                radius: ["40%", "60%"],
                color: ["#065aab", "#066eab"],
                label: {
                    show: false,
                },
                labelLine: {
                    show: false,
                },
                data: [],
            },
        ],
    };
    myChart.setOption(option);
    window.addEventListener("resize", function () {
        myChart.resize();
    });
    $.getJSON("../static/GDP_data_1.json", function (res) {
        let ep = res[1].children;
        console.log(ep.length);
        let arrs = [];

        for (let i = 0; i < ep.length; i++) {
            let m = {};
            m["name"] = ep[i]["name"];
            m["value"] = ep[i]["value"];
            arrs.push(m);
        }
        myChart.setOption({
            series: [
                {
                    name: "欧洲GDP占比",
                    data: arrs,
                    color: [
                        "#065aab",
                        "#066eab",
                        "#0682ab",
                        "#0696ab",
                        "#06a0ab",
                        "#06b4ab",
                        "#06c8ab",
                        "#06dcab",
                        "	#00FF7F",
                        "	#90EE90",
                    ],
                },
            ],
        });
    });
    myChart.hideLoading();
    myChart.setOption(option);
</script>
</body>
</html>